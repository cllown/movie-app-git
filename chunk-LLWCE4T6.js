import{a as k}from"./chunk-NEHWX6WX.js";import{O as L}from"./chunk-LQGQBVCB.js";import{b as j}from"./chunk-BYM645XA.js";import"./chunk-LG7EKJLH.js";import{Bb as O,Cb as R,Cc as D,Da as A,Ea as w,Fa as l,G as I,Ga as a,Ha as u,Ia as g,Ja as d,Na as T,T as P,Wa as M,Xa as v,cb as $,ec as F,k as x,kb as h,la as r,lb as C,ma as _,n as f,nb as S,nc as B,o as y,w as E,wa as c,ya as s,yb as b}from"./chunk-625T36XV.js";var N=(e,t)=>t.id;function z(e,t){if(e&1&&u(0,"app-movie-card",7),e&2){let n=t.$implicit;s("movie",n)("isActionsShow",!0)("isRemoveButtonShow",!1)}}function Y(e,t){if(e&1&&(g(0),l(1,"div",6),A(2,z,1,3,"app-movie-card",7,N),a(),d()),e&2){let n=T().ngIf;r(2),w(n)}}function q(e,t){e&1&&(l(0,"p"),v(1,"No recommendations yet, put some films to favourite"),a())}function G(e,t){if(e&1&&(g(0),c(1,Y,4,0,"ng-container",5)(2,q,2,0,"ng-template",null,1,S),d()),e&2){let n=t.ngIf,m=M(3);r(),s("ngIf",n&&n.length>0)("ngIfElse",m)}}function H(e,t){if(e&1&&(g(0),u(1,"app-movie-list",8),d()),e&2){let n=t.ngIf;r(),s("movies",n)}}function J(e,t){e&1&&(l(0,"p"),v(1,"Loading..."),a())}var ie=(()=>{let t=class t{constructor(m,o){this.store=m,this.movieService=o}ngOnInit(){let m=this.store.select(D),o=this.store.select(B);this.allMovies$=y([m,o]).pipe(f(([i,p])=>i&&i.length>0?i:p)),this.recommendationMovies$=this.movieService.getFavouriteMovies().pipe(E(1),f(i=>i.map(p=>p.id)),I(i=>i.length===0?x([]):this.movieService.getSmartRecommendations(i)))}};t.\u0275fac=function(o){return new(o||t)(_(F),_(j))},t.\u0275cmp=P({type:t,selectors:[["app-all-movies-page"]],standalone:!0,features:[$],decls:11,vars:7,consts:[["loading",""],["noMovies",""],[1,"page-wrapper"],[1,"page-title"],[4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"all-movies__items","items-movies","recommendation-list"],[3,"movie","isActionsShow","isRemoveButtonShow"],[3,"movies"]],template:function(o,i){if(o&1&&(l(0,"div",2)(1,"h2",3),v(2,"Recommended for You"),a(),c(3,G,4,2,"ng-container",4),h(4,"async"),l(5,"h2",3),v(6,"All movies"),a(),c(7,H,2,1,"ng-container",5),h(8,"async"),c(9,J,2,0,"ng-template",null,0,S),a()),o&2){let p=M(10);r(3),s("ngIf",C(4,3,i.recommendationMovies$)),r(4),s("ngIf",C(8,5,i.allMovies$))("ngIfElse",p)}},dependencies:[k,R,b,O,L],styles:[".all-movies__items.items-movies[_ngcontent-%COMP%]{display:flex;overflow-x:auto;overflow-y:hidden;padding-bottom:1rem;margin-bottom:2rem;gap:1.25rem;scroll-snap-type:x mandatory}.all-movies__items.items-movies[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 12rem;scroll-snap-align:start;box-sizing:border-box}.all-movies__items.items-movies[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}"],changeDetection:0});let e=t;return e})();export{ie as AllMoviesPageComponent};
