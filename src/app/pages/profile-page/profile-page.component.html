<ng-container *ngIf="username$; else notLoggedIn">
  <p-card class="profile-page">
    <div class="profile-header">
      <h2>Welcome!</h2>
      <p-button (click)="logout()" label="logout"></p-button>
    </div>


    <p-tabView>

      <p-tabPanel header="liked">
        <ng-container *ngIf="favouriteMovies$ | async as movies;">
            <ng-container *ngIf="movies && movies.length > 0; else noMovies">
              <div class="items-movies">
                @for(movie of movies; track movie.id){
                <app-movie-card [movie]="movie" [isActionsShow]="false" [isRemoveButtonShow]="true"
                  (removeFromList)="removeFromFavourites(movie.id)"></app-movie-card>
                }
              </div>
            </ng-container>
            <ng-template #noMovies>
              <p>You haven't added any movies to this category yet.</p>
            </ng-template>
          </ng-container>
      </p-tabPanel>
      <p-tabPanel header="watch list">
        <ng-container *ngIf="watchListMovies$ | async as movies;">
          <ng-container *ngIf="movies && movies.length > 0; else noMovies">
            <div class="items-movies">
              @for(movie of movies; track movie.id){
              <app-movie-card [movie]="movie" [isActionsShow]="false" [isRemoveButtonShow]="true"
                (removeFromList)="removeFromWatchList(movie.id)"></app-movie-card>
              }
            </div>
          </ng-container>
          <ng-template #noMovies>
            <p>You haven't added any movies to this category yet.</p>
          </ng-template>
        </ng-container>
      </p-tabPanel>
      <p-tabPanel header="other">

      </p-tabPanel>
    </p-tabView>
  </p-card>
</ng-container>

<ng-template #notLoggedIn>
  <p>You are not logged in. Please log in first.</p>
</ng-template>
