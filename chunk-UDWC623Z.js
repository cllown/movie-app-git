import{K as N,P as U,Pa as ne,Qa as oe,Ra as se,Ua as ae,V as G,Va as re,Z as H,pa as J}from"./chunk-MGDC5FNC.js";import{Ab as j,Bb as Q,Ea as s,F as y,Fa as n,Ga as O,H as v,Ha as E,Ia as $,Ka as k,La as h,Ma as u,Nb as Y,Pa as T,S as w,Sa as A,Ta as D,Ua as B,Va as F,Wa as r,Xa as V,Ya as M,Z as _,_ as f,bb as W,dc as q,h as C,ha as S,hc as K,jb as c,ka as o,kb as l,la as I,mb as R,n as x,nc as X,o as P,oc as Z,pc as ee,sc as te,tc as ie,va as L,w as g,xa as d,xb as z}from"./chunk-AXS64SOQ.js";var pe=["customMenu"];function ce(m,p){if(m&1){let a=k();E(0),s(1,"div",4)(2,"div",5),O(3,"img",6),n(),s(4,"div",7)(5,"h2",8),r(6),n(),s(7,"p")(8,"strong"),r(9,"Release Date:"),n(),r(10),n(),s(11,"p")(12,"strong"),r(13,"Rating:"),n(),r(14),c(15,"ratingRounding"),n(),s(16,"p")(17,"strong"),r(18,"Description:"),n(),r(19),n(),s(20,"p")(21,"strong"),r(22,"Original Language:"),n(),r(23),n(),s(24,"div",9)(25,"div",10)(26,"p-button",11),c(27,"async"),h("click",function(){let t=_(a).ngIf,i=u();return f(i.onWatch(t.id))}),n()(),s(28,"div",12)(29,"p-button",13),c(30,"async"),c(31,"async"),h("click",function(){let t=_(a).ngIf,i=u();return f(i.onAddToFavourites(t.id))}),n()(),s(32,"div",12)(33,"p-button",14),c(34,"async"),c(35,"async"),h("click",function(){let t=_(a).ngIf,i=u();return f(i.onAddToWatchList(t.id))}),n()(),s(36,"div",12)(37,"p-button",15),c(38,"async"),h("click",function(t){_(a);let i=u();return f(i.toggleMenu(t))}),n(),O(39,"p-menu",16,1),n()()()(),$()}if(m&2){let a=p.ngIf,e=u();o(3),T("alt",a.title),d("src","https://image.tmdb.org/t/p/w500"+a.backdrop_path,S),o(3),V(a.title),o(4),M(" ",a.release_date,""),o(4),M(" ",l(15,15,a.vote_average),""),o(5),M(" ",a.overview,""),o(4),M(" ",a.original_language,""),o(3),d("disabled",!l(27,17,e.isLoggedIn$)),o(3),d("disabled",!l(30,19,e.isLoggedIn$))("styleClass",l(31,21,e.isFavourite$)?"pi pi-heart-fill":"pi pi-heart"),o(4),d("disabled",!l(34,23,e.isLoggedIn$))("styleClass",l(35,25,e.isInWatchList$)?"pi pi-check-circle":"pi pi-history"),o(4),d("disabled",!l(38,27,e.isLoggedIn$)),o(2),d("model",e.customListMenuItems)("popup",!0)}}function le(m,p){m&1&&(s(0,"p"),r(1,"Loading..."),n())}var ye=(()=>{let p=class p{constructor(e,t){this.store=e,this.router=t,this.isLoggedIn$=this.store.select(te),this.isSubscribed$=this.store.select(ie),this.customLists$=this.store.select(K),this.customListMenuItems=[]}ngOnInit(){this.movie$=this.store.select(X),this.initAdditionalFlags(),this.customLists$.subscribe(e=>{this.prepareCustomListMenuItems(e||[])})}toggleMenu(e){this.customMenu&&this.customMenu.toggle(e)}initAdditionalFlags(){this.isFavourite$=P([this.movie$,this.store.select(Z)]).pipe(x(([e,t])=>e?t?.some(i=>i.id===e.id)??!1:!1)),this.isInWatchList$=P([this.movie$,this.store.select(ee)]).pipe(x(([e,t])=>e?t?.some(i=>i.id===e.id)??!1:!1))}prepareCustomListMenuItems(e){!e||e.length===0?this.customListMenuItems=[{label:"You don`t have any custom lists yet.",disabled:!0}]:this.customListMenuItems=e.map(t=>({label:t.name,icon:"pi pi-plus",command:()=>this.addToCustomList(t.id)}))}onWatch(e){this.isLoggedIn$.pipe(g(1),y(t=>t?this.isSubscribed$.pipe(g(1),v(i=>{i?this.router.navigate(["/movie/watch/",e]):this.openSubscriptionPopup()})):(this.openLoginPopup(),C))).subscribe()}openLoginPopup(){this.store.dispatch(G())}openSubscriptionPopup(){this.store.dispatch(H())}addToCustomList(e){this.isLoggedIn$.pipe(g(1),y(t=>t?this.movie$.pipe(g(1),v(i=>{i&&this.store.dispatch(J({movieId:i.id,listId:e}))})):(this.openLoginPopup(),C))).subscribe()}onAddToFavourites(e){this.isLoggedIn$.pipe(g(1),v(t=>{t?this.store.dispatch(N({movieId:e})):this.openLoginPopup()})).subscribe()}onAddToWatchList(e){this.isLoggedIn$.pipe(g(1),v(t=>{t?this.store.dispatch(U({movieId:e})):this.openLoginPopup()})).subscribe()}};p.\u0275fac=function(t){return new(t||p)(I(q),I(Y))},p.\u0275cmp=w({type:p,selectors:[["app-details-movie-page"]],viewQuery:function(t,i){if(t&1&&A(pe,5),t&2){let b;D(b=B())&&(i.customMenu=b.first)}},standalone:!0,features:[W],decls:5,vars:4,consts:[["loading",""],["customMenu",""],[1,"page-wrapper"],[4,"ngIf","ngIfElse"],[1,"movie-details-page"],[1,"movie-image"],[3,"src","alt"],[1,"movie-info"],[1,"page-title"],[1,"movie-page__actions"],[1,"movie-action-button","watch-button"],["label","Watch",3,"click","disabled"],[1,"movie-action-button"],[3,"click","disabled","styleClass"],["severity","secondary",3,"click","disabled","styleClass"],["icon","pi pi-ellipsis-v",3,"click","disabled"],["appendTo","body",3,"model","popup"]],template:function(t,i){if(t&1&&(s(0,"div",2),L(1,ce,41,29,"ng-container",3),c(2,"async"),L(3,le,2,0,"ng-template",null,0,R),n()),t&2){let b=F(4);o(),d("ngIf",l(2,2,i.movie$))("ngIfElse",b)}},dependencies:[Q,z,j,se,oe,ne,re,ae],styles:[".page-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:2rem;background-color:#121212;color:#f5f5f5;min-height:100vh;border-radius:5%;margin-top:.25rem}.movie-details-page[_ngcontent-%COMP%]{display:flex;gap:2rem;background-color:#1e1e1e;padding:2rem;border-radius:12px;box-shadow:0 4px 20px #0009;max-width:1000px;width:100%;transition:all .3s ease}@media (max-width: 768px){.movie-details-page[_ngcontent-%COMP%]{flex-direction:column;padding:1rem;gap:1rem}}.movie-image[_ngcontent-%COMP%]{flex:0 0 40%;border-radius:8px;overflow:hidden}.movie-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;display:block;border-radius:8px;object-fit:cover}@media (max-width: 768px){.movie-image[_ngcontent-%COMP%]{flex:1 0 auto}}.movie-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.5rem;font-size:1.125rem;color:#e0e0e0}.movie-info[_ngcontent-%COMP%]   .movie-page__actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.movie-info[_ngcontent-%COMP%]   .movie-page__actions[_ngcontent-%COMP%]   .movie-action-button[_ngcontent-%COMP%]{display:inline-flex;width:48px;height:48px}.movie-info[_ngcontent-%COMP%]   .movie-page__actions[_ngcontent-%COMP%]   .movie-action-button[_ngcontent-%COMP%]     .p-button{width:100%;height:100%;justify-content:center;padding:0;font-size:1rem;padding:.625rem}.movie-info[_ngcontent-%COMP%]   .movie-page__actions[_ngcontent-%COMP%]   .movie-action-button[_ngcontent-%COMP%]     .p-button:before{font-size:1.25rem}.movie-info[_ngcontent-%COMP%]   .movie-page__actions[_ngcontent-%COMP%]   .movie-action-button.watch-button[_ngcontent-%COMP%]{width:75px}.movie-info[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:.5rem;color:#fff}@media (max-width: 768px){.movie-info[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.5rem}}.movie-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1.5}.movie-info[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]{align-self:flex-start;margin-top:1rem}.movie-info[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]     .p-button{background-color:#42a5f5!important;border:none!important}.movie-info[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]     .p-button:disabled{background-color:#555!important;cursor:not-allowed;opacity:.6}"],changeDetection:0});let m=p;return m})();export{ye as DetailsMoviePageComponent};
